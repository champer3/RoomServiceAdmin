import { useCallback, useState } from 'react'
import { useDropzone } from 'react-dropzone'

const styling = 'w-full h-full rounded-lg border border-2 border-[#F0F1F3] bg-[#F9F9FC] py-[24px] px-[12px]'
export default function DisplayPhotoDropzone({ label, description }) {
    const [file, setFile] = useState(null)
    const onDrop = useCallback(acceptedFiles => {
        if (acceptedFiles?.length) {
            setFile(Object.assign(acceptedFiles[0], { preview: URL.createObjectURL(acceptedFiles[0]) })); // Create preview URL
        }
    }, [])
    const { getRootProps, getInputProps, isDragActive } = useDropzone({ onDrop, accept: 'image/*', multiple: false })
    function removeFile() {
        URL.revokeObjectURL(file.preview)
        setFile(null)
    }

    return (
        <>
            <div {...getRootProps({
                className: styling
            })}>
                <input {...getInputProps()} />
                {
                    <>
                        {!file &&
                            <>
                                <svg className='ml-auto mr-auto mt-6' width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M12 3C10.9389 2.99988 9.90049 3.30662 9.00979 3.88327C8.1191 4.45991 7.41418 5.28184 6.98 6.25C6.91932 6.38726 6.85732 6.52394 6.794 6.66C6.77267 6.70467 6.74999 6.74869 6.726 6.792C6.69276 6.84617 6.64969 6.89365 6.599 6.932C6.54311 6.96232 6.48208 6.98199 6.419 6.99C6.383 6.997 6.309 7 6 7C5.07174 7 4.1815 7.36875 3.52513 8.02513C2.86875 8.6815 2.5 9.57174 2.5 10.5C2.5 11.4283 2.86875 12.3185 3.52513 12.9749C4.1815 13.6313 5.07174 14 6 14H6.672L7.672 13H6C5.33696 13 4.70107 12.7366 4.23223 12.2678C3.76339 11.7989 3.5 11.163 3.5 10.5C3.5 9.83696 3.76339 9.20107 4.23223 8.73223C4.70107 8.26339 5.33696 8 6 8H6.054C6.28 8 6.467 8 6.616 7.97C6.796 7.934 6.974 7.88 7.142 7.77C7.31 7.662 7.432 7.522 7.54 7.372C7.598 7.292 7.65 7.188 7.697 7.089C7.747 6.983 7.81 6.842 7.89 6.665L7.892 6.66C8.24694 5.8673 8.82364 5.19422 9.55256 4.72195C10.2815 4.24968 11.1315 3.99839 12 3.99839C12.8685 3.99839 13.7185 4.24968 14.4474 4.72195C15.1764 5.19422 15.7531 5.8673 16.108 6.66L16.11 6.666C16.19 6.842 16.253 6.983 16.303 7.089C16.35 7.188 16.402 7.291 16.46 7.372C16.567 7.522 16.69 7.662 16.858 7.771C17.026 7.88 17.204 7.934 17.384 7.971C17.533 8.001 17.72 8.001 17.946 8H18C18.663 8 19.2989 8.26339 19.7678 8.73223C20.2366 9.20107 20.5 9.83696 20.5 10.5C20.5 11.163 20.2366 11.7989 19.7678 12.2678C19.2989 12.7366 18.663 13 18 13H16.328L17.328 14H18C18.4596 14 18.9148 13.9095 19.3394 13.7336C19.764 13.5577 20.1499 13.2999 20.4749 12.9749C20.7999 12.6499 21.0577 12.264 21.2336 11.8394C21.4095 11.4148 21.5 10.9596 21.5 10.5C21.5 10.0404 21.4095 9.58525 21.2336 9.16061C21.0577 8.73597 20.7999 8.35013 20.4749 8.02513C20.1499 7.70012 19.764 7.44231 19.3394 7.26642C18.9148 7.09053 18.4596 7 18 7C17.691 7 17.617 6.997 17.582 6.99C17.5189 6.98168 17.4578 6.96167 17.402 6.931C17.351 6.89275 17.3075 6.84526 17.274 6.791L17.258 6.764C17.2398 6.72942 17.2225 6.69441 17.206 6.659C17.1427 6.52327 17.0807 6.38693 17.02 6.25C16.5858 5.28184 15.8809 4.45991 14.9902 3.88327C14.0995 3.30662 13.0611 2.99988 12 3Z" fill="#333333" fill-opacity="0.5" />
                                    <path d="M12 12.5L11.646 12.146L12 11.793L12.354 12.146L12 12.5ZM12.5 21.5C12.5 21.6326 12.4473 21.7598 12.3535 21.8535C12.2598 21.9473 12.1326 22 12 22C11.8674 22 11.7402 21.9473 11.6464 21.8535C11.5527 21.7598 11.5 21.6326 11.5 21.5H12.5ZM7.646 16.146L11.646 12.146L12.354 12.854L8.354 16.854L7.646 16.146ZM12.354 12.146L16.354 16.146L15.646 16.854L11.646 12.854L12.354 12.146ZM12.5 12.5V21.5H11.5V12.5H12.5Z" fill="#333333" fill-opacity="0.5" />
                                </svg>
                                <p className="p-2 text-center font-extrabold text-[14px] leading-[20px] tracking-[0.005em] text-[#858D9D]">{isDragActive ? 'Drop the image here ...' : description}</p>
                                <div className="w-full flex justify-center items-center">
                                    <p className="font-bold text-[12px] leading-[20px] tracking-[0.005em] text-customGrey">Select Image</p>
                                </div>
                            </>}
                        {file &&
                            <>
                                <div class="relative ml-auto bg-[#E0E2E7] rounded-lg px-2 py-2 mr-auto w-[100px]">
                                    <img className='ml-auto mr-auto object-cover' src={file.preview} alt='' />
                                    <span className="absolute top-0 right-0 transform -translate-y-[10px]">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <rect width="24" height="24" rx="12" fill="#D3F4EF" />
                                            <g clip-path="url(#clip0_578_3741)">
                                                <path d="M16.2995 8.84625L10.5416 14.6038C10.5029 14.6426 10.4569 14.6735 10.4062 14.6945C10.3556 14.7155 10.3012 14.7264 10.2464 14.7264C10.1915 14.7264 10.1372 14.7155 10.0866 14.6945C10.0359 14.6735 9.98989 14.6426 9.95118 14.6038L7.72451 12.375C7.6858 12.3361 7.63979 12.3053 7.58913 12.2843C7.53848 12.2632 7.48416 12.2524 7.4293 12.2524C7.37445 12.2524 7.32013 12.2632 7.26947 12.2843C7.21881 12.3053 7.17281 12.3361 7.1341 12.375C7.09523 12.4137 7.06439 12.4597 7.04335 12.5104C7.02231 12.561 7.01147 12.6154 7.01147 12.6702C7.01147 12.7251 7.02231 12.7794 7.04335 12.83C7.06439 12.8807 7.09523 12.9267 7.1341 12.9654L9.3616 15.1925C9.59657 15.427 9.91501 15.5588 10.247 15.5588C10.579 15.5588 10.8975 15.427 11.1324 15.1925L16.8899 9.43625C16.9287 9.39755 16.9595 9.35157 16.9805 9.30095C17.0015 9.25033 17.0123 9.19606 17.0123 9.14125C17.0123 9.08645 17.0015 9.03218 16.9805 8.98156C16.9595 8.93094 16.9287 8.88496 16.8899 8.84625C16.8512 8.80739 16.8052 8.77655 16.7546 8.75551C16.7039 8.73446 16.6496 8.72363 16.5947 8.72363C16.5399 8.72363 16.4855 8.73446 16.4349 8.75551C16.3842 8.77655 16.3382 8.80739 16.2995 8.84625Z" fill="#116557" />
                                            </g>
                                            <defs>
                                                <clipPath id="clip0_578_3741">
                                                    <rect width="10" height="10" fill="white" transform="translate(7 7)" />
                                                </clipPath>
                                            </defs>
                                        </svg>
                                    </span>
                                </div>

                                <p className="p-6 text-center font-extrabold text-[14px] leading-[20px] tracking-[0.005em] text-[#858D9D]">{isDragActive ? 'Drop the image here ...' : 'Drag and drop image here, or click change image'}</p>
                                <div className="w-full flex justify-center">
                                    <button className="border border-[1px] border-[#283618] px-[14px] py-[10px] font-bold text-[14px] leading-[20px] tracking-[0.005em] text-[#283618] rounded-lg hover:text-white hover:bg-[#283618]">Change Image</button>
                                </div>
                            </>}
                    </>
                }
            </div>
            {file && <div className='flex'>
                <p className='pr-2 text-center font-extrabold text-[16px] leading-[20px] tracking-[0.005em] text-[#333333]'>{file.name}</p>
                <button className='' onClick={removeFile}><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="12px" height="12px"><linearGradient id="wRKXFJsqHCxLE9yyOYHkza" x1="9.858" x2="38.142" y1="9.858" y2="38.142" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#f44f5a" /><stop offset=".443" stop-color="#ee3d4a" /><stop offset="1" stop-color="#e52030" /></linearGradient><path fill="url(#wRKXFJsqHCxLE9yyOYHkza)" d="M44,24c0,11.045-8.955,20-20,20S4,35.045,4,24S12.955,4,24,4S44,12.955,44,24z" /><path d="M33.192,28.95L28.243,24l4.95-4.95c0.781-0.781,0.781-2.047,0-2.828l-1.414-1.414	c-0.781-0.781-2.047-0.781-2.828,0L24,19.757l-4.95-4.95c-0.781-0.781-2.047-0.781-2.828,0l-1.414,1.414	c-0.781,0.781-0.781,2.047,0,2.828l4.95,4.95l-4.95,4.95c-0.781,0.781-0.781,2.047,0,2.828l1.414,1.414	c0.781,0.781,2.047,0.781,2.828,0l4.95-4.95l4.95,4.95c0.781,0.781,2.047,0.781,2.828,0l1.414-1.414	C33.973,30.997,33.973,29.731,33.192,28.95z" opacity=".05" /><path d="M32.839,29.303L27.536,24l5.303-5.303c0.586-0.586,0.586-1.536,0-2.121l-1.414-1.414	c-0.586-0.586-1.536-0.586-2.121,0L24,20.464l-5.303-5.303c-0.586-0.586-1.536-0.586-2.121,0l-1.414,1.414	c-0.586,0.586-0.586,1.536,0,2.121L20.464,24l-5.303,5.303c-0.586,0.586-0.586,1.536,0,2.121l1.414,1.414	c0.586,0.586,1.536,0.586,2.121,0L24,27.536l5.303,5.303c0.586,0.586,1.536,0.586,2.121,0l1.414-1.414	C33.425,30.839,33.425,29.889,32.839,29.303z" opacity=".07" /><path fill="#fff" d="M31.071,15.515l1.414,1.414c0.391,0.391,0.391,1.024,0,1.414L18.343,32.485	c-0.391,0.391-1.024,0.391-1.414,0l-1.414-1.414c-0.391-0.391-0.391-1.024,0-1.414l14.142-14.142	C30.047,15.124,30.681,15.124,31.071,15.515z" /><path fill="#fff" d="M32.485,31.071l-1.414,1.414c-0.391,0.391-1.024,0.391-1.414,0L15.515,18.343	c-0.391-0.391-0.391-1.024,0-1.414l1.414-1.414c0.391-0.391,1.024-0.391,1.414,0l14.142,14.142	C32.876,30.047,32.876,30.681,32.485,31.071z" /></svg></button>

            </div>}
        </>
    )
}